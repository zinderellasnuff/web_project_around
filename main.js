!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var o=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)},(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".popup__error_".concat(e.id));n&&(e.classList.add(this._config.inputErrorClass),n.textContent=t,n.classList.add(this._config.errorClass))}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".popup__error_".concat(e.id));t&&(e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent="")}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function a(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}var l=function(){return e=function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._templateSelector=n,this._handleOpenModal=o},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element__article").cloneNode(!0)}},{key:"_handleLikeIcon",value:function(){this._element.querySelector(".element__button-like").classList.toggle("element__button-like-active")}},{key:"_handleDeleteCard",value:function(){this._element&&(this._element.remove(),this._element=null)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__button-like").addEventListener("click",(function(){e._handleLikeIcon()})),this._element.querySelector(".element__button-trash").addEventListener("click",(function(){e._handleDeleteCard()})),this._element.querySelector(".element__img").addEventListener("click",(function(){e._handleOpenModal(e._link,e._name)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".element__img").src=this._link,this._element.querySelector(".element__img").alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._setEventListeners(),this._element}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function u(e,t){var n=document.querySelector("#modal-template").content.cloneNode(!0),o=n.querySelector(".modal"),r=n.querySelector(".modal__image"),i=n.querySelector(".modal__caption"),a=n.querySelector(".modal__close");r.src=e,i.textContent=t,o.style.display="flex";var l=function(){o.style.display="none",document.body.contains(n)&&document.body.removeChild(n),document.removeEventListener("keydown",u)},u=function(e){"Escape"===e.key&&l()};a.addEventListener("click",l),o.addEventListener("click",(function(e){e.target===o&&l()})),document.addEventListener("keydown",u),document.body.appendChild(n)}var s=document.querySelector(".profile__info-button"),c=document.querySelector(".popup--edit-profile"),p=c.querySelector(".popup__close-button"),m=document.querySelector(".profile__info-name"),_=document.querySelector(".profile__info-subtitle"),d=c.querySelector(".popup__form"),f=c.querySelector("#popup-name"),y=c.querySelector("#popup-about"),v=document.querySelector(".profile__button-add"),h=document.querySelector(".popup--add-card"),b=h.querySelector(".popup__close-button"),S=h.querySelector(".popup__form--add-card"),E=h.querySelector("#card-name"),k=h.querySelector("#card-image"),g=document.querySelector(".elements__container"),L={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},w={formSelector:".popup__form--add-card",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},q=[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}];document.addEventListener("DOMContentLoaded",(function(){var e=new o(L,d),t=new o(w,S);function n(){c.style.display="none"}function r(){h.style.display="none"}e.enableValidation(),t.enableValidation(),q.forEach((function(e){var t=new l(e,"#card-template",u);g.prepend(t.generateCard())})),s.addEventListener("click",(function(){f.value=m.textContent,y.value=_.textContent,c.style.display="flex",e.resetValidation()})),p.addEventListener("click",n),c.addEventListener("click",(function(e){e.target===c&&n()})),v.addEventListener("click",(function(){h.style.display="flex",t.resetValidation()})),b.addEventListener("click",r),h.addEventListener("click",(function(e){e.target===h&&r()})),d.addEventListener("submit",(function(e){e.preventDefault(),m.textContent=f.value,_.textContent=y.value,n()})),S.addEventListener("submit",(function(e){e.preventDefault();var t={name:E.value,link:k.value},n=new l(t,"#card-template",u);g.prepend(n.generateCard()),r()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(n(),r())}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUNsQ0EsRUFBTUMsU0FBV1csR0FBY2EsR0FDckMsSUFFQWpCLEVBQVkvQyxpQkFBaUIsVUEvQzdCLFNBQWlDdUMsR0FDL0JBLEVBQU0rQixpQkFDTnpCLEVBQVk1RCxZQUFjK0QsRUFBaUJ4RSxNQUMzQ3NFLEVBQWdCN0QsWUFBY2dFLEVBQWtCekUsTUFDaER1RixHQUNGLElBMkNBVixFQUFZckQsaUJBQWlCLFVBL0I3QixTQUFpQ3VDLEdBQy9CQSxFQUFNK0IsaUJBQ04sSUFBTUMsRUFBVyxDQUNmOUQsS0FBTTZDLEVBQWM5RSxNQUNwQm1DLEtBQU00QyxFQUFlL0UsT0FFakIwRixFQUFPLElBQUk5RCxFQUFLbUUsRUFBVSxpQkFBa0IvQyxHQUNsRGdDLEVBQWtCVyxRQUFRRCxFQUFLRSxnQkFDL0JKLEdBQ0YsSUF5QkFsRCxTQUFTZCxpQkFBaUIsV0FBVyxTQUFDdUMsR0FDbEIsV0FBZEEsRUFBTWhFLE1BQ1J3RixJQUNBQyxJQUVKLEdBQ0YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL3NjcmlwdHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAucG9wdXBfX2Vycm9yXyR7aW5wdXRFbGVtZW50LmlkfWBcbiAgICApO1xuICAgIGlmIChlcnJvckVsZW1lbnQpIHtcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC5wb3B1cF9fZXJyb3JfJHtpbnB1dEVsZW1lbnQuaWR9YFxuICAgICk7XG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVPcGVuTW9kYWwpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlT3Blbk1vZGFsID0gaGFuZGxlT3Blbk1vZGFsO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2FydGljbGVcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fYnV0dG9uLWxpa2UtYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tdHJhc2hcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltZ1wiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW5Nb2RhbCh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWdcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIG9wZW5Nb2RhbChzcmMsIGNhcHRpb24pIHtcbiAgY29uc3QgbW9kYWxUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtdGVtcGxhdGVcIikuY29udGVudDtcbiAgY29uc3QgbW9kYWxFbGVtZW50ID0gbW9kYWxUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IG1vZGFsID0gbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG4gIGNvbnN0IG1vZGFsSW1nID0gbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICBjb25zdCBtb2RhbENhcHRpb24gPSBtb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbiAgY29uc3QgY2xvc2VCdXR0b24gPSBtb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5cbiAgbW9kYWxJbWcuc3JjID0gc3JjO1xuICBtb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBjYXB0aW9uO1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgY29uc3QgY2xvc2VNb2RhbCA9ICgpID0+IHtcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMobW9kYWxFbGVtZW50KSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbEVsZW1lbnQpO1xuICAgIH1cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUVzY2FwZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICB9XG4gIH07XG5cbiAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTW9kYWwpO1xuXG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBtb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsRWxlbWVudCk7XG59XG4iLCJpbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcblxuLy8gRWxlbWVudG9zIGRlbCBwZXJmaWxcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLS1lZGl0LXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUNsb3NlQnV0dG9uID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2luZm8tc3VidGl0bGVcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dElucHV0ID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtYWJvdXRcIik7XG5cbi8vIEVsZW1lbnRvcyBwYXJhIGHDsWFkaXIgdGFyamV0YVxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1hZGRcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC0tYWRkLWNhcmRcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZENsb3NlQnV0dG9uID0gYWRkQ2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLS1hZGQtY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTmFtZUlucHV0ID0gYWRkQ2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRJbWFnZUlucHV0ID0gYWRkQ2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZVwiKTtcblxuLy8gQ29udGVuZWRvciBkZSBlbGVtZW50b3NcbmV4cG9ydCBjb25zdCBlbGVtZW50c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NvbnRhaW5lclwiKTtcblxuLy8gQ29uZmlndXJhY2nDs24gZGUgdmFsaWRhY2nDs25cbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm1Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm0tLWFkZC1jYXJkXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIFRhcmpldGFzIGluaWNpYWxlc1xuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuIiwiaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9jYXJkLmpzXCI7XG5pbXBvcnQgeyBvcGVuTW9kYWwgfSBmcm9tIFwiLi9zY3JpcHRzL3V0aWxzLmpzXCI7XG5pbXBvcnQge1xuICBlZGl0QnV0dG9uLFxuICBwcm9maWxlUG9wdXAsXG4gIHByb2ZpbGVDbG9zZUJ1dHRvbixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVTdWJ0aXRsZSxcbiAgcHJvZmlsZUZvcm0sXG4gIHByb2ZpbGVOYW1lSW5wdXQsXG4gIHByb2ZpbGVBYm91dElucHV0LFxuICBhZGRDYXJkQnV0dG9uLFxuICBhZGRDYXJkUG9wdXAsXG4gIGFkZENhcmRDbG9zZUJ1dHRvbixcbiAgYWRkQ2FyZEZvcm0sXG4gIGNhcmROYW1lSW5wdXQsXG4gIGNhcmRJbWFnZUlucHV0LFxuICBlbGVtZW50c0NvbnRhaW5lcixcbiAgcHJvZmlsZUZvcm1Db25maWcsXG4gIGFkZENhcmRGb3JtQ29uZmlnLFxuICBpbml0aWFsQ2FyZHMsXG59IGZyb20gXCIuL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgLy8gSW5zdGFuY2lhcyBkZSB2YWxpZGFkb3Jlc1xuICBjb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIHByb2ZpbGVGb3JtQ29uZmlnLFxuICAgIHByb2ZpbGVGb3JtXG4gICk7XG4gIGNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gICAgYWRkQ2FyZEZvcm1Db25maWcsXG4gICAgYWRkQ2FyZEZvcm1cbiAgKTtcblxuICAvLyBIYWJpbGl0YXIgdmFsaWRhY2nDs25cbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbiAgLy8gRnVuY2lvbmVzIHBhcmEgbWFuZWphciBlbCBwb3B1cCBkZWwgcGVyZmlsXG4gIGZ1bmN0aW9uIG9wZW5Qcm9maWxlUG9wdXAoKSB7XG4gICAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICAgIHByb2ZpbGVBYm91dElucHV0LnZhbHVlID0gcHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50O1xuICAgIHByb2ZpbGVQb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vIFJlc2V0ZWEgbGEgdmFsaWRhY2nDs25cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlUHJvZmlsZVBvcHVwKCkge1xuICAgIHByb2ZpbGVQb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZUlucHV0LnZhbHVlO1xuICAgIHByb2ZpbGVTdWJ0aXRsZS50ZXh0Q29udGVudCA9IHByb2ZpbGVBYm91dElucHV0LnZhbHVlO1xuICAgIGNsb3NlUHJvZmlsZVBvcHVwKCk7XG4gIH1cblxuICAvLyBGdW5jaW9uZXMgcGFyYSBtYW5lamFyIGVsIHBvcHVwIGRlIGHDsWFkaXIgdGFyamV0YVxuICBmdW5jdGlvbiBvcGVuQWRkQ2FyZFBvcHVwKCkge1xuICAgIGFkZENhcmRQb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vIFJlc2V0ZWEgbGEgdmFsaWRhY2nDs25cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlQWRkQ2FyZFBvcHVwKCkge1xuICAgIGFkZENhcmRQb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgY2FyZERhdGEgPSB7XG4gICAgICBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLFxuICAgICAgbGluazogY2FyZEltYWdlSW5wdXQudmFsdWUsXG4gICAgfTtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgb3Blbk1vZGFsKTtcbiAgICBlbGVtZW50c0NvbnRhaW5lci5wcmVwZW5kKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIGNsb3NlQWRkQ2FyZFBvcHVwKCk7XG4gIH1cblxuICAvLyBJbmljaWFsaXphciB0YXJqZXRhc1xuICBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIG9wZW5Nb2RhbCk7XG4gICAgZWxlbWVudHNDb250YWluZXIucHJlcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbiAgfSk7XG5cbiAgLy8gTGlzdGVuZXJzXG4gIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlUG9wdXApO1xuICBwcm9maWxlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUHJvZmlsZVBvcHVwKTtcbiAgcHJvZmlsZVBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBwcm9maWxlUG9wdXApIGNsb3NlUHJvZmlsZVBvcHVwKCk7XG4gIH0pO1xuXG4gIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRDYXJkUG9wdXApO1xuICBhZGRDYXJkQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQWRkQ2FyZFBvcHVwKTtcbiAgYWRkQ2FyZFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBhZGRDYXJkUG9wdXApIGNsb3NlQWRkQ2FyZFBvcHVwKCk7XG4gIH0pO1xuXG4gIHByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuICBhZGRDYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcblxuICAvLyBDZXJyYXIgcG9wdXBzIGNvbiBFc2NhcGVcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgY2xvc2VQcm9maWxlUG9wdXAoKTtcbiAgICAgIGNsb3NlQWRkQ2FyZFBvcHVwKCk7XG4gICAgfVxuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJrZXkiLCJ2YWx1ZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfdGhpcyIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90aGlzMiIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZU9wZW5Nb2RhbCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZU9wZW5Nb2RhbCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwidG9nZ2xlIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJhbHQiLCJvcGVuTW9kYWwiLCJjYXB0aW9uIiwibW9kYWxFbGVtZW50IiwibW9kYWwiLCJtb2RhbEltZyIsIm1vZGFsQ2FwdGlvbiIsImNsb3NlQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5IiwiY2xvc2VNb2RhbCIsImJvZHkiLCJjb250YWlucyIsInJlbW92ZUNoaWxkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUVzY2FwZSIsImV2ZW50IiwidGFyZ2V0IiwiYXBwZW5kQ2hpbGQiLCJlZGl0QnV0dG9uIiwicHJvZmlsZVBvcHVwIiwicHJvZmlsZUNsb3NlQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlU3VidGl0bGUiLCJwcm9maWxlRm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlQWJvdXRJbnB1dCIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkUG9wdXAiLCJhZGRDYXJkQ2xvc2VCdXR0b24iLCJhZGRDYXJkRm9ybSIsImNhcmROYW1lSW5wdXQiLCJjYXJkSW1hZ2VJbnB1dCIsImVsZW1lbnRzQ29udGFpbmVyIiwicHJvZmlsZUZvcm1Db25maWciLCJmb3JtU2VsZWN0b3IiLCJhZGRDYXJkRm9ybUNvbmZpZyIsImluaXRpYWxDYXJkcyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJjbG9zZVByb2ZpbGVQb3B1cCIsImNsb3NlQWRkQ2FyZFBvcHVwIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmQiLCJwcmVwZW5kIiwiZ2VuZXJhdGVDYXJkIiwicmVzZXRWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJjYXJkRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=